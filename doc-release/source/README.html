

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Poco ポコ &mdash; poco  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="poco  documentation" href="../index.html"/>
        <link rel="next" title="poco package" href="poco.html"/>
        <link rel="prev" title="Welcome to Poco (ポコ) documentation!" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> poco
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Poco ポコ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basic-concepts">Basic Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#definitions-of-coordinate-system-and-metric-space">Definitions of coordinate system and metric space</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#normalized-coordinate-system">Normalized Coordinate System</a></li>
<li class="toctree-l4"><a class="reference internal" href="#local-coordinate-system-local-positioning">Local Coordinate System (local positioning)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#poco-instance">Poco Instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-poco-objects">Working with Poco Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-selector">Basic Selector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#relative-selector">Relative Selector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sequence-selector-index-selector-iterator-is-recommended-for-use">Sequence Selector (index selector, iterator is recommended for use)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iterate-over-a-collection-of-objects">Iterate over a collection of objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-object-properties">Get object properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-proxy-related-operation">Object Proxy Related Operation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#click">click</a></li>
<li class="toctree-l4"><a class="reference internal" href="#swipe">swipe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#drag">drag</a></li>
<li class="toctree-l4"><a class="reference internal" href="#focus-local-positioning">focus (local positioning)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wait">wait</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#global-operation">Global Operation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">click</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">swipe</a></li>
<li class="toctree-l4"><a class="reference internal" href="#snapshot">snapshot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pocotargettimeout">PocoTargetTimeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#poconosuchnodeexception">PocoNoSuchNodeException</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#unit-test">Unit Test</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="poco.html">poco package</a></li>
<li class="toctree-l1"><a class="reference internal" href="poco.proxy.html">poco.proxy module</a></li>
<li class="toctree-l1"><a class="reference internal" href="poco.exceptions.html">poco.exceptions module</a></li>
<li class="toctree-l1"><a class="reference internal" href="poco.sdk.html">poco.sdk package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">poco</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Poco ポコ</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/README.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="poco">
<h1>Poco ポコ<a class="headerlink" href="#poco" title="Permalink to this headline">¶</a></h1>
<p><strong>A cross-engine UI automation framework</strong></p>
<p><a class="reference external" href="doc/integration.html">中文README(Chinese README)</a> 在此。</p>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>Main Poco features includes following:</p>
<ul class="simple">
<li>supports mainstream game engines, including: Unity3D, cocos2dx-js, cocos2dx-lua and Android native apps</li>
<li>retrieves UI Elements Hierarchy in game’s runtime</li>
<li>is super fast and impact-free to the game</li>
<li>allows straightforward SDK integration to the game (within in 5 minutes)</li>
<li>provides powerful APIs taht are engine independent</li>
<li>supports multi-touch e.g. fling/pinch/… (and more is coming soon)</li>
<li>support gps, accelerometer and gyro sensors, rotation (landscape/portrait) and other sensors as input (coming soon)</li>
<li>is extensible to other private engines by implementing <a class="reference external" href="doc/integration.html">poco-sdk</a> .</li>
<li>is compatible with Python 2.7 and Python 3.3+.</li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>In order to use Poco, you must install Poco python library on your host and also install the <a class="reference external" href="doc/integration.html">poco-sdk</a> in
your game/app.</p>
<p><strong>Poco</strong> can be installed straightforward with <code class="docutils literal"><span class="pre">pip</span></code> command</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># In the future</span>
pip install poco
</pre></div>
</div>
<p>Currently, the code is available only in <cite>Git</cite> repository and can be installed as follows</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone https://github.com/Meteorix/poco.git
pip install -e poco
</pre></div>
</div>
<p>For NetEase internal use, clone the repository from following location</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone ssh://git@git-qa.gz.netease.com:32200/maki/poco.git
pip install -e poco
</pre></div>
</div>
<p>For <strong>poco-sdk</strong> integration please refer to <a class="reference external" href="doc/integration.html">Integration Guide</a></p>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>The following example shows a simple test script on demo game using Unity3D. <a class="reference external" href="doc/poco-example/index.html">More examples</a> here.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">poco.drivers.unity3d</span> <span class="kn">import</span> <span class="n">UnityPoco</span> <span class="k">as</span> <span class="n">Poco</span>

<span class="n">poco</span> <span class="o">=</span> <span class="n">Poco</span><span class="p">((</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">5001</span><span class="p">))</span>

<span class="c1"># tap start button</span>
<span class="n">poco</span><span class="p">(</span><span class="s1">&#39;start_btn&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;Button&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

<span class="c1"># collect all &#39;stars&#39; to my &#39;bag&#39; by dragging the star icon</span>
<span class="n">bag</span> <span class="o">=</span> <span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bag_area&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">star</span> <span class="ow">in</span> <span class="n">poco</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;MPanel&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;star&#39;</span><span class="p">):</span>
    <span class="n">star</span><span class="o">.</span><span class="n">drag_to</span><span class="p">(</span><span class="n">bag</span><span class="p">)</span>

<span class="c1"># click Text starting with &#39;finish&#39; to finish collecting</span>
<span class="n">poco</span><span class="p">(</span><span class="n">textMatches</span><span class="o">=</span><span class="s1">&#39;finish.*&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-concepts">
<h2>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h2>
<p>This section describes the basic concepts of Poco. Basic terminology used in following section</p>
<ul class="simple">
<li><strong>Target device</strong>: test devices where the apps or games run on, it usually refers to mobile phone devices</li>
<li><strong>UI proxy</strong>: proxy objects within Poco framework, they represent zero (none), one or multiple in-game UI elements</li>
<li><strong>Node/UI element</strong>: UI element instances or nodes in app/game</li>
<li><strong>query expression</strong>: a serializable internal data structure through which Poco interacts with <strong>target devices</strong> and
selects the corresponding UI elements. It is not usually needed to pay much attention to this unless it is required
to customize the <code class="docutils literal"><span class="pre">Selector</span></code> class.</li>
</ul>
<p>Following images show the UI hierarchy represented in Poco</p>
<img alt="../_images/hunter-inspector.png" src="../_images/hunter-inspector.png" />
<img alt="../_images/hunter-inspector-text-attribute.png" src="../_images/hunter-inspector-text-attribute.png" />
<img alt="../_images/hunter-inspector-hierarchy-relations.png" src="../_images/hunter-inspector-hierarchy-relations.png" />
<div class="section" id="definitions-of-coordinate-system-and-metric-space">
<h3>Definitions of coordinate system and metric space<a class="headerlink" href="#definitions-of-coordinate-system-and-metric-space" title="Permalink to this headline">¶</a></h3>
<div class="section" id="normalized-coordinate-system">
<h4>Normalized Coordinate System<a class="headerlink" href="#normalized-coordinate-system" title="Permalink to this headline">¶</a></h4>
<p>In normalized coordinate system, the origin (0, 0) lies on top left corner of the device display. The height and the
width of the screen are chosen as 1 unit of length, refer to image below for more detailed information.
In normalized coordinate system, the same UI elements on the devices with different resolution have always the same
position and size. This is especially very handy when writing cross-device test cases.</p>
<p>The space of normalized coordinate system is uniformly distributed, i.e. the coordinates of the screen center are
(0.5, 0.5) and the computing method of other scalars and vectors are all same in Euclidean space.</p>
<img alt="../_images/hunter-poco-coordinate-system.png" src="../_images/hunter-poco-coordinate-system.png" />
</div>
<div class="section" id="local-coordinate-system-local-positioning">
<h4>Local Coordinate System (local positioning)<a class="headerlink" href="#local-coordinate-system-local-positioning" title="Permalink to this headline">¶</a></h4>
<p>The aim of introducing local coordinate system is to express the coordinates with reference to a certain UI elements.
The origin (0,0) of local coordinate system lies on the top left corner of UI bounding box, x-axis goes horizontally
rightward direction and y-axis goes vertically downwards. The height and the width of UI element are chosen as 1 unit of
length. Coordinates are expressed as signed distances from the origin. Other definitions are same as for normalized
coordinate system.</p>
<p>Local coordinate system is more flexible in order to locate the position within or outside of UI element, e.g
the coordinates at (0.5, 0.5) corresponds to the center of the UI element while coordinates larger than 1 or less than 0
correspond to the position out of the UI element.</p>
</div>
</div>
</div>
<div class="section" id="poco-instance">
<h2>Poco Instance<a class="headerlink" href="#poco-instance" title="Permalink to this headline">¶</a></h2>
<p>There are several engines supported and for each engine the different <code class="docutils literal"><span class="pre">poco</span></code> instance must be initialized.</p>
<p>Supported engines are as follows:</p>
<ul class="simple">
<li><a class="reference internal" href="#cocos2dx-js">cocos2dx-js</a></li>
<li><a class="reference internal" href="#android-native">android-native</a></li>
<li>unreal (in development)</li>
<li>for other engines, refer to <a class="reference external" href="doc/integration.html">Integration guide</a> for more details</li>
</ul>
<p>Following example shows how to initialize popo instance for Unity3D.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">poco.vendor.unity3d</span> <span class="kn">import</span> <span class="n">UnityPoco</span>

<span class="n">poco</span> <span class="o">=</span> <span class="n">UnityPoco</span><span class="p">()</span>
<span class="n">ui</span> <span class="o">=</span> <span class="n">poco</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-poco-objects">
<h2>Working with Poco Objects<a class="headerlink" href="#working-with-poco-objects" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-selector">
<h3>Basic Selector<a class="headerlink" href="#basic-selector" title="Permalink to this headline">¶</a></h3>
<p>UI element objects can be selected by invoking <code class="docutils literal"><span class="pre">poco(...)</span></code> function instance. The function traverses through the
render tree structure and selects all the corresponding UI elements matching the query expression.</p>
<p>The function takes one mandatory argument <cite>node name</cite>, the optional arguments can be substituted too and they refer to
specific node properties. For more information, refer to API reference.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># select by node name</span>
<span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span>

<span class="c1"># select by name and other properties</span>
<span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;Button&#39;</span><span class="p">)</span>
<span class="n">poco</span><span class="p">(</span><span class="n">textMatches</span><span class="o">=</span><span class="s1">&#39;^据点.*$&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;Button&#39;</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/hunter-poco-select-simple.png" src="../_images/hunter-poco-select-simple.png" />
</div>
<div class="section" id="relative-selector">
<h3>Relative Selector<a class="headerlink" href="#relative-selector" title="Permalink to this headline">¶</a></h3>
<p>When there is any ambiguity in the selected objects by node names/node types or object unable to select, the relative
selector tries to select the element object by hierarchy in following manner</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># select by direct child/offspring</span>
<span class="n">poco</span><span class="p">(</span><span class="s1">&#39;main_node&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;list_item&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">offspring</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/hunter-poco-select-relative.png" src="../_images/hunter-poco-select-relative.png" />
</div>
<div class="section" id="sequence-selector-index-selector-iterator-is-recommended-for-use">
<h3>Sequence Selector (index selector, iterator is recommended for use)<a class="headerlink" href="#sequence-selector-index-selector-iterator-is-recommended-for-use" title="Permalink to this headline">¶</a></h3>
<p>Tree indexing and traversing is performed by default from up to down or from left to right. In case that
the ‘not-yet-traversed’ nodes are removed from the screen, the exception is raised. The exception is not raised in case
when the ‘already-traversed’ nodes are removed and in this case the traversing continues in previous order despite
the fact that thenodes in views were rearranged during the travers process.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">items</span> <span class="o">=</span> <span class="n">poco</span><span class="p">(</span><span class="s1">&#39;main_node&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;list_item&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">offspring</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;material_name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;material_name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>
</pre></div>
</div>
<img alt="../_images/hunter-poco-select-sequence.png" src="../_images/hunter-poco-select-sequence.png" />
</div>
<div class="section" id="iterate-over-a-collection-of-objects">
<h3>Iterate over a collection of objects<a class="headerlink" href="#iterate-over-a-collection-of-objects" title="Permalink to this headline">¶</a></h3>
<p>Following code snippet shows how to iterate over the collection of UI objects</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># traverse through every item</span>
<span class="n">items</span> <span class="o">=</span> <span class="n">poco</span><span class="p">(</span><span class="s1">&#39;main_node&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;list_item&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">offspring</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
    <span class="n">item</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;icn_item&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/hunter-poco-iteration.png" src="../_images/hunter-poco-iteration.png" />
</div>
<div class="section" id="get-object-properties">
<h3>Get object properties<a class="headerlink" href="#get-object-properties" title="Permalink to this headline">¶</a></h3>
<p>Following examples shows how to obtain various properties of an object</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">mission_btn</span> <span class="o">=</span> <span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">mission_btn</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">))</span>  <span class="c1"># &#39;Button&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">mission_btn</span><span class="o">.</span><span class="n">get_text</span><span class="p">())</span>  <span class="c1"># &#39;据点支援&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">mission_btn</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">))</span>  <span class="c1"># &#39;据点支援&#39; equivalent to .get_text()</span>
<span class="k">print</span><span class="p">(</span><span class="n">mission_btn</span><span class="o">.</span><span class="n">exists</span><span class="p">())</span>  <span class="c1"># True/False, exists in the screen or not</span>
</pre></div>
</div>
</div>
<div class="section" id="object-proxy-related-operation">
<h3>Object Proxy Related Operation<a class="headerlink" href="#object-proxy-related-operation" title="Permalink to this headline">¶</a></h3>
<p>This section describes object proxy related operations</p>
<div class="section" id="click">
<h4>click<a class="headerlink" href="#click" title="Permalink to this headline">¶</a></h4>
<p>The anchorPoint of UI element is attached to the click point by default. When the first argument
(the relative click position) is passed to the function, the coordinates of the top-left corner of the bounding box
become <cite>[0, 0]</cite> and the bottom right corner coordinates are <cite>[1, 1]</cite>. The click range area can be less than 0 or larger
than 1. If the click range area lies in the interval (0, 1), it means it is beyond the bounding box.</p>
<p>Following example demonstrates how to use <code class="docutils literal"><span class="pre">click</span></code> function</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
<span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>    <span class="c1"># equivalent to center</span>
<span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">focus</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>  <span class="c1"># equivalent to above expression</span>
</pre></div>
</div>
<img alt="../_images/hunter-poco-click.png" src="../_images/hunter-poco-click.png" />
</div>
<div class="section" id="swipe">
<h4>swipe<a class="headerlink" href="#swipe" title="Permalink to this headline">¶</a></h4>
<p>The anchorPoint of UI element is taken as the origin, the swipe action is performed towards the given direction with
the certain distance.</p>
<p>Following example shows how to use the <code class="docutils literal"><span class="pre">swipe</span></code> function</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">joystick</span> <span class="o">=</span> <span class="n">poco</span><span class="p">(</span><span class="s1">&#39;movetouch_panel&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s1">&#39;point_img&#39;</span><span class="p">)</span>
<span class="n">joystick</span><span class="o">.</span><span class="n">swipe</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">)</span>
<span class="n">joystick</span><span class="o">.</span><span class="n">swipe</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">])</span>  <span class="c1"># swipe sqrt(0.08) unit distance at 45 degree angle up-and-right</span>
<span class="n">joystick</span><span class="o">.</span><span class="n">swipe</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/hunter-poco-swipe.png" src="../_images/hunter-poco-swipe.png" />
</div>
<div class="section" id="drag">
<h4>drag<a class="headerlink" href="#drag" title="Permalink to this headline">¶</a></h4>
<p>Drag from current UI element to the target UI element.</p>
<p>Following example shows how to use the <code class="docutils literal"><span class="pre">drag_to</span></code> function</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">poco</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;突破芯片&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">drag_to</span><span class="p">(</span><span class="n">poco</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;岩石司康饼&#39;</span><span class="p">))</span>
</pre></div>
</div>
<img alt="../_images/hunter-poco-drag.png" src="../_images/hunter-poco-drag.png" />
</div>
<div class="section" id="focus-local-positioning">
<h4>focus (local positioning)<a class="headerlink" href="#focus-local-positioning" title="Permalink to this headline">¶</a></h4>
<p>The anchorPoint is set as the origin when conducting operations related to the node coordinates. If the the local click
area is need, the focus function can be used. The coordinate system is similar to the screen coordinates - the origin
is put to the top left corner of the bounding box and with length of unit of 1, i.e the coordinates of the center are
then <cite>[0.5, 0.5]</cite> and the bottom right corner has coordinates <cite>[1, 1]</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="s1">&#39;center&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>  <span class="c1"># click the center</span>
</pre></div>
</div>
<p>The focus function can also be used as internal positioning within the objects. Following example demonstrates the implementation of <cite>scroll</cite> operation in <cite>ScrollView</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">scrollView</span> <span class="o">=</span> <span class="n">poco</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;ScollView&#39;</span><span class="p">)</span>
<span class="n">scrollView</span><span class="o">.</span><span class="n">focus</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span><span class="o">.</span><span class="n">drag_to</span><span class="p">(</span><span class="n">scrollView</span><span class="o">.</span><span class="n">focus</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="section" id="wait">
<h4>wait<a class="headerlink" href="#wait" title="Permalink to this headline">¶</a></h4>
<p>Wait for the target objects on the screen and return the object itself. If the object the object exists, return it
immediately, otherwise return after timeout.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>  <span class="c1"># wait 5 seconds at most，click once the object appears</span>
<span class="n">poco</span><span class="p">(</span><span class="s1">&#39;bg_mission&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>  <span class="c1"># wait 5 seconds at most，return Exists or Not Exists</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="global-operation">
<h3>Global Operation<a class="headerlink" href="#global-operation" title="Permalink to this headline">¶</a></h3>
<p><cite>Poco</cite> framework also allows to perform the operations without any UI elements selected. These operations are called
<cite>global</cite> operations.</p>
<div class="section" id="id1">
<h4>click<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">poco</span><span class="o">.</span><span class="n">click</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>  <span class="c1"># click the center of screen</span>
<span class="n">poco</span><span class="o">.</span><span class="n">long_click</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">duration</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h4>swipe<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># swipe from A to B</span>
<span class="n">point_a</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]</span>
<span class="n">center</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<span class="n">poco</span><span class="o">.</span><span class="n">swipe</span><span class="p">(</span><span class="n">point_a</span><span class="p">,</span> <span class="n">center</span><span class="p">)</span>

<span class="c1"># swipe from A by given direction</span>
<span class="n">direction</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">poco</span><span class="o">.</span><span class="n">swipe</span><span class="p">(</span><span class="n">point_a</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="snapshot">
<h4>snapshot<a class="headerlink" href="#snapshot" title="Permalink to this headline">¶</a></h4>
<p>Take a screenshot of the current screen and save it to file.</p>
<p><strong>Note</strong>: <code class="docutils literal"><span class="pre">snapshot</span></code>  is not supported in some engine implementation of poco.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64decode</span>

<span class="n">b64img</span> <span class="o">=</span> <span class="n">poco</span><span class="o">.</span><span class="n">snapshot</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">720</span><span class="p">)</span>
<span class="nb">open</span><span class="p">(</span><span class="s1">&#39;screen.png&#39;</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">b64decode</span><span class="p">(</span><span class="n">b64img</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h2>
<p>This sections describes the Poco framework errors and exceptions.</p>
<div class="section" id="pocotargettimeout">
<h3>PocoTargetTimeout<a class="headerlink" href="#pocotargettimeout" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">poco.exceptions</span> <span class="kn">import</span> <span class="n">PocoTargetTimeout</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">poco</span><span class="p">(</span><span class="s1">&#39;guide_panel&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;ImageView&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">wait_for_appearance</span><span class="p">()</span>
<span class="k">except</span> <span class="n">PocoTargetTimeout</span><span class="p">:</span>
    <span class="c1"># bugs here as the panel not shown</span>
    <span class="k">raise</span>
</pre></div>
</div>
</div>
<div class="section" id="poconosuchnodeexception">
<h3>PocoNoSuchNodeException<a class="headerlink" href="#poconosuchnodeexception" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">poco.exceptions</span> <span class="kn">import</span> <span class="n">PocoNoSuchNodeException</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">poco</span><span class="p">(</span><span class="s1">&#39;guide_panel&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;ImageView&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">img</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="n">img</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
<span class="k">except</span> <span class="n">PocoNoSuchNodeException</span><span class="p">:</span>
    <span class="c1"># If attempt to operate inexistent nodes, an exception will be thrown</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="unit-test">
<h2>Unit Test<a class="headerlink" href="#unit-test" title="Permalink to this headline">¶</a></h2>
<p>Poco is an automation test framework. For unit testing, please refer to <a class="reference external" href="http://git-qa.gz.netease.com/maki/PocoUnit">PocoUnit</a> section. PocoUnit provides a full
set of assertion methods and furthermore, it is also compatible with the <code class="docutils literal"><span class="pre">unittest</span></code> in Python standard library.</p>
<span class="target" id="android-native"><span id="cocos2dx-js"></span></span></div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="poco.html" class="btn btn-neutral float-right" title="poco package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Welcome to Poco (ポコ) documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, NetEase Co, Ltd..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>